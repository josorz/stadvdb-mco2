<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
  <title>Steam Games</title>
  <script>
    const handleDelete = async (e) => {
      e.preventDefault()
      fetch(`/edit/<%= data.AppID %>`, {
          method: 'DELETE'
        }).then((res) => res.json())
        .then(({
          success
        }) => {
          if (success) {
            window.location.href = '/'
          } else {}
        })
    };

    const handleSubmit = async (e) => {
      e.preventDefault()

      // Select the form element
      const form = document.getElementById('editForm');

      // Create a new FormData object from the form
      const formData = new FormData(form);
      const formDataJson = {};
      formData.forEach((value, key) => {
        formDataJson[key] = value;
      });

      fetch("/edit/<%= data.AppID %>", {
          method: 'PUT',
          headers: {
            'Content-Type': 'application/json', // Indicate that the body is JSON
          },
          body: JSON.stringify(formDataJson)
        }).then((res) => res.json())
        .then(({
          success
        }) => {
          if (success) {
            window.location.href = '/'
          } else {}
        })
    };
  </script>
</head>

<body class="body">
  <%- include('../partial/header.ejs'); %>

  <main class="container">
    <form onSubmit="" className="space-y-4" name="editForm" id="editForm" onSubmit="handleSubmit(event)">
      <div className="flex space-x-4">
        <button type="submit" onClick="handleSubmit(event)">
          Update
        </button>
        <button onClick="handleDelete(event)">
          Delete
        </button>
      </div>

      <div className="flex space-x-4">

        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Name</label>
          <input name="Name" type="text" value="<%= data.Name %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>


        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Release Date</label>
          <input name="Release_date" type="date" value="<%= data.Release_date %>" />
        </div>
      </div>


      <div className="flex space-x-4">
        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Estimated Owners</label>
          <input name="Estimated_owners" type="text" value="<%= data.Estimated_owners %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>


        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Peak CCU</label>
          <input name="Peak_CCU" type="number" value="<%= data.Peak_CCU %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>


        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Required Age</label>
          <input name="Required_age" type="number" value="<%= data.Required_age %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>
      </div>


      <div className="flex space-x-4">
        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Price</label>
          <input name="Price" type="number" step="0.01" value="<%= data.Price %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>


        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Discount DLC Count</label>
          <input name="DiscountDLC_count" type="number" value="<%= data.DiscountDLC_count %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>

      </div>

      <div className="flex flex-col w-full">
        <label className="text-sm font-semibold mb-2">About the Game</label>
        <textarea name="About_the_game" className="border border-gray-300 rounded-lg px-3 py-2 h-32"><%= data.About_the_game %></textarea>
      </div>


      <div className="flex space-x-4">
        <div className="flex flex-col w-1/2">
          <label className="text-sm font-semibold mb-2">Supported Languages</label>
          <input name="Supported_languages" type="text" value="<%= data.Supported_languages %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>


        <div className="flex flex-col w-1/2">
          <label className="text-sm font-semibold mb-2">Full Audio Languages</label>
          <input name="Full_audio_languages" type="text" value="<%= data.Full_audio_languages %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>

        <div className="flex flex-col w-1/2">
          <label className="text-sm font-semibold mb-2">Reviews</label>
          <input name="Reviews" type="text" value="<%= data.Reviews %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>

      </div>

      <div className="flex space-x-4">
        <div className="flex flex-col w-1/2">
          <label className="text-sm font-semibold mb-2">Header Image</label>
          <input name="Header_image" type="text" value="<%= data.Header_image %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>


        <div className="flex flex-col w-1/2">
          <label className="text-sm font-semibold mb-2">Website</label>
          <input name="Website" type="text" value="<%= data.Website %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>

        <div className="flex flex-col w-1/2">
          <label className="text-sm font-semibold mb-2">Support_url</label>
          <input name="Support_url" type="text" value="<%= data.Support_url %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>

        <div className="flex flex-col w-1/2">
          <label className="text-sm font-semibold mb-2">Support_email</label>
          <input name="Support_email" type="text" value="<%= data.Support_email %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>

      </div>

      <div className="flex space-x-4">
        <div className="flex items-center space-x-2">
          <input type="checkbox" name="Windows" className="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" defaultChecked="<%= data.Windows %>" />
          <label htmlFor="example" className="text-gray-700">
            Windows
          </label>
        </div>

        <div className="flex items-center space-x-2">
          <input type="checkbox" name="Mac" className="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" defaultChecked="<%= data.Mac %>" />
          <label htmlFor="example" className="text-gray-700">
            Mac
          </label>
        </div>
        <div className="flex items-center space-x-2">
          <input type="checkbox" name="Linux" className="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" defaultChecked="<%= data.Linux %>" />
          <label htmlFor="example" className="text-gray-700">
            Linux
          </label>
        </div>
      </div>



      <div className="flex flex-col w-full">
        <label className="text-sm font-semibold mb-2">Metacritic</label>
        <input name="Metacritic_url" type="text" value="<%= data.Metacritic_url %>" className="border border-gray-300 rounded-lg px-3 py-2" />
      </div>


      <div className="flex space-x-4">

        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Metacritic Score</label>
          <input name="Metacritic_score" type="number" value="<%= data.Metacritic_score %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>


        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">User Score</label>
          <input name="User_score" type="number" value="<%= data.User_score %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>


        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Positive Reviews</label>
          <input name="Positive" type="number" value="<%= data.Positive %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>
      </div>


      <div className="flex space-x-4">
        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Negative Reviews</label>
          <input name="Negative" type="number" value="<%= data.Negative %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>


        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Score Rank</label>
          <input name="Score_rank" type="number" value="<%= data.Score_rank %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>


        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Achievements</label>
          <input name="Achievements" type="number" value="<%= data.Achievements %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>
      </div>


      <div className="flex space-x-4">
        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Recommendations</label>
          <input name="Recommendations" type="number" value="<%= data.Recommendations %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>

        <div className="flex flex-col w-full">
          <label className="text-sm font-semibold mb-2">Notes</label>
          <textarea name="Screenshots" className="border border-gray-300 rounded-lg px-3 py-2 h-32"><%= data.Notes %></textarea>
        </div>
      </div>

      <div className="flex space-x-4">
        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Average_playtime_forever</label>
          <input name="Metacritic_score" type="number" value="<%= data.Average_playtime_forever %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>


        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Average_playtime_two_weeks</label>
          <input name="User_score" type="number" value="<%= data.Average_playtime_two_weeks %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>
      </div>

      <div className="flex space-x-4">
        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Median_playtime_forever</label>
          <input name="Metacritic_score" type="number" value="<%= data.Median_playtime_forever %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>


        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Median_playtime_two_weeks</label>
          <input name="User_score" type="number" value="<%= data.Median_playtime_two_weeks %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>
      </div>


      <div>


        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Owner Count</label>
          <input name="Owner_count" type="number" value="<%= data.Owner_count %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>


        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Discount Price</label>
          <input name="Discount_price" type="number" value="<%= data.Discount_price %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>
      </div>

      <div className="flex space-x-4">
        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Developers</label>
          <input name="Developers" type="text" value="<%= data.Developers %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>

        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Publishers</label>
          <input name="Publishers" type="text" value="<%= data.Publishers %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>

        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Categories</label>
          <input name="Categories" type="text" value="<%= data.Categories %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>
      </div>

      <div className="flex space-x-4">
        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Genres</label>
          <input name="Developers" type="text" value="<%= data.Genres %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>

        <div className="flex flex-col w-1/3">
          <label className="text-sm font-semibold mb-2">Tags</label>
          <input name="Categories" type="text" value="<%= data.Tags %>" className="border border-gray-300 rounded-lg px-3 py-2" />
        </div>
      </div>



      <div className="flex flex-col w-full">
        <label className="text-sm font-semibold mb-2">Screenshots (URLs)</label>
        <textarea name="Screenshots" className="border border-gray-300 rounded-lg px-3 py-2 h-32"><%= data.Screenshots %></textarea>
      </div>

      <div className="flex flex-col w-full">
        <label className="text-sm font-semibold mb-2">Movies</label>
        <textarea name="Movies" className="border border-gray-300 rounded-lg px-3 py-2 h-32"><%= data.Movies %></textarea>
      </div>

    </form>
  </main>

  <!-- Footer -->
  <%- include('../partial/footer.ejs'); %>

</body>

</html>